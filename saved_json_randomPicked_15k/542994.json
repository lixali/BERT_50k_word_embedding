{
 "id": "542994",
 "text": "In number theory, a happy number is a number which eventually reaches 1 when replaced by the sum of the square of each digit. For instance, 13 is a happy number because 1^2+3^2=10, and 1^2+0^2=1. On the other hand, 4 is not a happy number because the sequence starting with 4^2=16 and 1^2+6^2=37 eventually reaches 2^2+0^2=4, the number that started the sequence, and so the process continues in an infinite cycle without ever reaching 1. A number which is not happy is called sad or unhappy. More generally, a b-happy number is a natural number in a given number base b that eventually reaches 1 when iterated over the perfect digital invariant function for p = 2. The origin of happy numbers is not clear. Happy numbers were brought to the attention of Reg Allenby (a British author and senior lecturer in pure mathematics at Leeds University) by his daughter, who had learned of them at school. However, they \"may have originated in Russia\" . == Happy numbers and perfect digital invariants == Formally, let n be a natural number. Given the perfect digital invariant function :F_{p, b}(n) = \\sum_{i=0}^{\\lfloor \\log_{b}{n} \\rfloor} {\\left(\\frac{n \\bmod{b^{i+1}} - n \\bmod{b^{i}}}{b^{i}}\\right)}^p. for base b > 1, a number n is b-happy if there exists a j such that F_{2, b}^j(n) = 1, where F_{2, b}^j represents the j-th iteration of F_{2, b}, and b-unhappy otherwise. If a number is a nontrivial perfect digital invariant of F_{2, b}, then it is b-unhappy. For example, 19 is 10-happy, as : F_{2, 10}(19) = 1^2 + 9^2 = 82 : F_{2, 10}^2(19) = F_{2, 10}(82) = 8^2 + 2^2 = 68 : F_{2, 10}^3(19) = F_{2, 10}(68) = 6^2 + 8^2 = 100 : F_{2, 10}^4(19) = F_{2, 10}(100) = 1^2 + 0^2 + 0^2 = 1 For example, 347 is 6-happy, as : F_{2, 6}(347) = F_{2, 6}(1335_6) = 1^2 + 3^2 + 3^2 + 5^2 = 44 : F_{2, 6}^2(347) = F_{2, 6}(44) = F_{2, 6}(112_6) = 1^2 + 1^2 + 2^2 = 6 : F_{2, 6}^3(347) = F_{2, 6}(6) = F_{2, 6}(10_6) = 1^2 + 0^2 = 1 There are infinitely many b-happy numbers, as 1 is a b-happy number, and for every n, b^n (10^n in base b) is b-happy, since its sum is 1. The happiness of a number is preserved by removing or inserting zeroes at will, since they do not contribute to the cross sum. === Natural density of b-happy numbers === By inspection of the first million or so 10-happy numbers, it appears that they have a natural density of around 0.15. Perhaps surprisingly, then, the 10-happy numbers do not have an asymptotic density. The upper density of the happy numbers is greater than 0.18577, and the lower density is less than 0.1138. === Happy bases === A happy base is a number base b where every number is b-happy. The only happy bases less than are base 2 and base 4. ==Specific b-happy numbers== ===4-happy numbers=== For b = 4, the only positive perfect digital invariant for F_{2, b} is the trivial perfect digital invariant 1, and there are no other cycles. Because all numbers are preperiodic points for F_{2, b}, all numbers lead to 1 and are happy. As a result, base 4 is a happy base. ===6-happy numbers=== For b = 6, the only positive perfect digital invariant for F_{2, b} is the trivial perfect digital invariant 1, and the only cycle is the eight-number cycle : 5 → 41 → 25 → 45 → 105 → 42 → 32 → 21 → 5 → ... and because all numbers are preperiodic points for F_{2, b}, all numbers either lead to 1 and are happy, or lead to the cycle and are unhappy. Because base 6 has no other perfect digital invariants except for 1, no positive integer other than 1 is the sum of the squares of its own digits. In base 10, the 74 6-happy numbers up to 1296 = 64 are (written in base 10): : 1, 6, 36, 44, 49, 79, 100, 160, 170, 216, 224, 229, 254, 264, 275, 285, 289, 294, 335, 347, 355, 357, 388, 405, 415, 417, 439, 460, 469, 474, 533, 538, 580, 593, 600, 608, 628, 638, 647, 695, 707, 715, 717, 767, 777, 787, 835, 837, 847, 880, 890, 928, 940, 953, 960, 968, 1010, 1018, 1020, 1033, 1058, 1125, 1135, 1137, 1168, 1178, 1187, 1195, 1197, 1207, 1238, 1277, 1292, 1295 ===10-happy numbers=== For b = 10, the only positive perfect digital invariant for F_{2, b} is the trivial perfect digital invariant 1, and the only cycle is the eight-number cycle : 4 → 16 → 37 → 58 → 89 → 145 → 42 → 20 → 4 → ... and because all numbers are preperiodic points for F_{2, b}, all numbers either lead to 1 and are happy, or lead to the cycle and are unhappy. Because base 10 has no other perfect digital invariants except for 1, no positive integer other than 1 is the sum of the squares of its own digits. In base 10, the 143 10-happy numbers up to 1000 are: : 1, 7, 10, 13, 19, 23, 28, 31, 32, 44, 49, 68, 70, 79, 82, 86, 91, 94, 97, 100, 103, 109, 129, 130, 133, 139, 167, 176, 188, 190, 192, 193, 203, 208, 219, 226, 230, 236, 239, 262, 263, 280, 291, 293, 301, 302, 310, 313, 319, 320, 326, 329, 331, 338, 356, 362, 365, 367, 368, 376, 379, 383, 386, 391, 392, 397, 404, 409, 440, 446, 464, 469, 478, 487, 490, 496, 536, 556, 563, 565, 566, 608, 617, 622, 623, 632, 635, 637, 638, 644, 649, 653, 655, 656, 665, 671, 673, 680, 683, 694, 700, 709, 716, 736, 739, 748, 761, 763, 784, 790, 793, 802, 806, 818, 820, 833, 836, 847, 860, 863, 874, 881, 888, 899, 901, 904, 907, 910, 912, 913, 921, 923, 931, 932, 937, 940, 946, 964, 970, 973, 989, 998, 1000 . The distinct combinations of digits that form 10-happy numbers below 1000 are (the rest are just rearrangements and/or insertions of zero digits): : 1, 7, 13, 19, 23, 28, 44, 49, 68, 79, 129, 133, 139, 167, 188, 226, 236, 239, 338, 356, 367, 368, 379, 446, 469, 478, 556, 566, 888, 899. . The first pair of consecutive 10-happy numbers is 31 and 32. The first set of three consecutive is 1880, 1881, and 1882. It has been proven that there exist sequences of consecutive happy numbers of any natural number length. The beginning of the first run of at least n consecutive 10-happy numbers for n = 1, 2, 3, ... is : 1, 31, 1880, 7839, 44488, 7899999999999959999999996, 7899999999999959999999996, ... As Robert Styer puts it in his paper calculating this series: \"Amazingly, the same value of N that begins the least sequence of six consecutive happy numbers also begins the least sequence of seven consecutive happy numbers.\" Cited in . The number of 10-happy numbers up to 10n for 1 ≤ n ≤ 20 is : 3, 20, 143, 1442, 14377, 143071, 1418854, 14255667, 145674808, 1492609148, 15091199357, 149121303586, 1443278000870, 13770853279685, 130660965862333, 1245219117260664, 12024696404768025, 118226055080025491, 1183229962059381238, 12005034444292997294. ==Happy primes== A b-happy prime is a number that is both b-happy and prime. Unlike happy numbers, rearranging the digits of a b-happy prime will not necessarily create another happy prime. For instance, while 19 is a 10-happy prime, 91 = 13 × 7 is not prime (but is still 10-happy). All prime numbers are 2-happy and 4-happy primes, as base 2 and base 4 are happy bases. ===6-happy primes=== In base 6, the 6-happy primes below 1296 = 64 are :211, 1021, 1335, 2011, 2425, 2555, 3351, 4225, 4441, 5255, 5525 ===10-happy primes=== In base 10, the 10-happy primes below 500 are :7, 13, 19, 23, 31, 79, 97, 103, 109, 139, 167, 193, 239, 263, 293, 313, 331, 367, 379, 383, 397, 409, 487 . The palindromic prime is a 10-happy prime with digits because the many 0s do not contribute to the sum of squared digits, and = 176, which is a 10-happy number. Paul Jobling discovered the prime in 2005. , the largest known 10-happy prime is 242643801 − 1 (a Mersenne prime). Its decimal expansion has digits. ===12-happy primes=== In base 12, there are no 12-happy primes less than 10000, the first 12-happy primes are (the letters X and E represent the decimal numbers 10 and 11 respectively) :11031, 1233E, 13011, 1332E, 16377, 17367, 17637, 22E8E, 2331E, 233E1, 23955, 25935, 25X8E, 28X5E, 28XE5, 2X8E5, 2E82E, 2E8X5, 31011, 31101, 3123E, 3132E, 31677, 33E21, 35295, 35567, 35765, 35925, 36557, 37167, 37671, 39525, 4878E, 4X7X7, 53567, 55367, 55637, 56357, 57635, 58XX5, 5X82E, 5XX85, 606EE, 63575, 63771, 66E0E, 67317, 67371, 67535, 6E60E, 71367, 71637, 73167, 76137, 7XX47, 82XE5, 82EX5, 8487E, 848E7, 84E87, 8874E, 8X1X7, 8X25E, 8X2E5, 8X5X5, 8XX17, 8XX71, 8E2X5, 8E847, 92355, 93255, 93525, 95235, X1X87, X258E, X285E, X2E85, X85X5, X8X17, XX477, XX585, E228E, E606E, E822E, EX825, ... ==Programming example== The examples below implement the perfect digital invariant function for p = 2 and a default base b = 10 described in the definition of happy given at the top of this article, repeatedly; after each time, they check for both halt conditions: reaching 1, and repeating a number. A simple test in Python to check if a number is happy: def pdi_function(number, base: int = 10): \"\"\"Perfect digital invariant function.\"\"\" total = 0 while number > 0: total += pow(number % base, 2) number = number // base return total def is_happy(number: int) -> bool: \"\"\"Determine if the specified number is a happy number.\"\"\" seen_numbers = set() while number > 1 and number not in seen_numbers: seen_numbers.add(number) number = pdi_function(number) return number == 1 ==See also== * Arithmetic dynamics *Fortunate number *Harshad number *Lucky number *Perfect digital invariant ==References== ==Literature== * ==External links== * Schneider, Walter: Mathews: Happy Numbers. * * calculate if a number is happy * Happy Numbers at The Math Forum. * 145 and the Melancoil at Numberphile. * Category:Arithmetic dynamics Category:Base- dependent integer sequences",
 "title": "Happy number"
}